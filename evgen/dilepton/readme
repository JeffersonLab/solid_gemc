=accep.C=
== Intro ==
accep.C gets the acceptance of a detector is provided by histograms in an acceptance file
then check every particles and record its acceptace by in new tree entry
Double_t accep_el_out_1,accep_minus_1,accep_plus_1,accep_recoil_1;
Double_t accep_el_out_2,accep_minus_2,accep_plus_2,accep_recoil_2;
Double_t accep_3fold_recoildecaypair;
Double_t accep_3fold_eloutdecaypair;
Double_t accep_4fold;
  
Some monitoring plots are drawn and saved during running  accep.C
acceptance*.png shows detector acceptance
BH_ThetaP*.png show 4 final particles generated, with individual acceptance, with overall acceptance in several rows
 
output particles info into a txt format LUND file is there, but commented out for now

TCS_Tree_infos.txt explain the tree entries

== how to run ==
(change relative path to yours)

first copy the root file produced by the generator to a new file with special name
cd /volatile/halla/solid/zwzhao/dilepton/TCSfiles
cp /volatile/halla/solid/mboer/Generator/TCSfiles/TCS_electroprod_1.root TCS_electroprod_1__SoLID_TCS_JPsiSetup_ele.root  


cp /u/scratch/mboer/TCS_electro2.root TCS_electro2_CLAS12_TCS_FTSetup_ele.root
cp /u/scratch/mboer/DDVCS_allxbj.root DDVCS_allxbj_SoLID_DDVCS_JPsiSetup_muon.root

The run the accep.C code with compliation in root
cd /home/zwzhao/solid/solid_svn/solid/evgen/dilepton/
ln -s ~/volatile/halla/solid/zwzhao/dilepton/TCSfiles ./
root
.x accep.C+("TCSfiles/TCS_electroprod_1__SoLID_TCS_JPsiSetup_ele.root")

.x accep.C+("~/volatile/halla/solid/mboer/Generator/TCS_electro2_CLAS12_TCS_FTSetup_ele.root")
.x accep.C+("/u/scratch/zwzhao/DDVCS_allxbj_SoLID_DDVCS_JPsiSetup_muon.root")

for CLAS12_TCS_FTSetup_ele, 
accep_3fold_recoildecaypair_FALA means decaypair in forward detector and recoil proton in either forwrd or central detector, 
accep_3fold_eloutdecaypair_FALA means decaypair in forward detector and elout in forward tagger by 2.5 and 4.5 degree cut,  
accep_4fold_FALA means decaypair in forward detector and recoil proton in either forwrd or central detector and elout in forward tagger by 2.5 and 4.5 degree cut

for SoLID_TCS_JPsiSetup_ele and SoLID_TCS_SIDISHe3Setup_ele
accep_3fold_recoildecaypair_FALA means all three particles in forward or large angle detector (at least one decay particles goes forward to use Cherenkov 4.9GeV threshold)
accep_3fold_eloutdecaypair_FALA is always 0 
accep_4fold_FALA is always 0

for SoLID_DDVCS_JPsiSetup_muon,
accep_3fold_recoildecaypair means decaypair in forward or large angle muon detector and recoil proton in forwrd or large angle detector (channel with low Q2 and high stat)
accep_3fold_eloutdecaypair means decaypair in forward or large angle muon detector and elout in forwrd or large angle detector  (channel with high Q2 and high stat, most interesting one)
accep_4fold means decaypair in forward or large angle muon detector and elout in forwrd or large angle detector and recoil proton in forwrd or large angle detector (channel with high Q2 and low  stat)

=table_TCS.C=

this file read the root tree with acceptance output by accep.C, and bin it into 5D binnng and calculate acceptance in each bin and output result into a table in a txt file
(currently, input files are hardcoded, you need to change it by hand for different detector)

run it in root with compilation ".x table_TCS.C+"

The binning choice are now
8 Egamma (5-11), 8 tt (0.1-1), 8 Qp2 (4-9), 10 Phi_CMV(0-2pi), 15 Theta_CMV(45-135)

each line of the txt file has 9 entries seperated by tab as below
"bin_Egamma	bin_tt bin_Qp2	bin_Phi_CMV	bin_Theta_CMV	accep_3fold_recoildecaypair		accep_3fold_eloutdecaypair	accep_4fold	Ngen"
bin numbers increase from kinematic variable right to left

=table_DDVCS.C=

this file read the root tree with acceptance output by accep.C, and bin it into 7D binnng and calculate acceptance in each bin and output result into a table in a txt file
(currently, input files are hardcoded, you need to change it by hand for different detector)

run it in root with compilation ".x table_DDVCS.C+"

The binning choice are now
4 Xbj (0.1-0.4), 6 tt (0.1-0.8), 6 Q2 (1-7), 6 Qp2 (2-9), 8 Phi_LH (0-2pi), 6 Theta_CMV(45-135),8 Phi_CMV(0-2pi),

each line of the txt file has 11 entries seperated by tab as below
"bin_Xbj	bin_tt	bin_Q2	bin_Qp2	bin_Phi_LH	bin_Theta_CMV	bin_Phi_CMV	accep_3fold_recoildecaypair		accep_3fold_eloutdecaypair	accep_4fold	Ngen"
bin numbers increase from kinematic variable right to left

== info about exp==

Jlab ele beam pol is 0.84+-0.01

SoLID JPsiSetup has 15cm LH2 target with 1e37/cm2/s luminosity, running for 50 days

CLAS12 ForwardTagger Setup has 15cm LH2 target with 1e35/cm/s luminosity, running for 130 days
