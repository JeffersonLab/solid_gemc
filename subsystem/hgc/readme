

= standalone code = 

== how to compile pioncher_mehdi ==
this is my case of building it, you need to change relavent path to yours

=== build geant4 ===
setenv JLAB_ROOT /home/zwzhao/apps/jlab_root
setenv JLAB_VERSION 1.1
setenv GEANT4_VERSION 4.9.5.p02
cd $JLAB_ROOT
wget http://www.jlab.org/12gev_phys/packages/sources/ceInstall/ceInstall_$JLAB_VERSION.tar.gz
tar -zxpvf ceInstall_$JLAB_VERSION.tar.gz
edit ce/geant4.enc to add "if($GEANT4_VERSION == "4.9.5.p02") setenv G4DATA_VERSION  Geant4-9.5.2"
source $JLAB_ROOT/$JLAB_VERSION/ce/jlab.csh  
cd $JLAB_VERSION/install
./go_clhep
./go_xercesc
./go_mysql
./go_qt4                (available for JLAB_VERSION <= 1.1)
./go_geant4     

refer to
https://eic.jlab.org/wiki/index.php/Installation_of_framework#local_installation_from_source

=== compile code ===
temporty modify code
/home/zwzhao/apps/jlab_root/1.1/Linux_RHEL6-x86_64-gcc4.4.7/geant4/4.9.5.p02/include/Geant4/G4VSensitiveDetector.hh
change
 virtual G4bool ProcessHits(G4Step*aStep,G4TouchableHistory*ROhist) = 0;
to
 virtual G4bool ProcessHits(const G4Step*aStep,G4TouchableHistory*ROhist) = 0;
Otherwise, no compilation or no output
 
go to a new terminal
source /home/zwzhao/apps/jlab_root/noarch/Geant4-9.5.2/geant4make/geant4make.csh
cd /home/zwzhao/solid/solid_svn/solid/subsystem/hgc/pioncher_mehdi
make

=== run it===
source set_solid_1.1_geant4.9.5.p02

run batch mode
bin/Linux-g++/pioncher run1.mac
run interactive mode
bin/Linux-g++/pioncher, then do /run/beamOn 1

=== detail of the code ===
in PrimaryGeneratorAction.cc, it does either particle gun or read txt file from Zhiwen's background file name as "particles.dat"

in CalorimeterSD.CC, PMTid is for 30 sectors, ModuleID is 480=30*16 for individual PMTid

result in txt file "PMTARRAY.dat" 
use dattoroot.C to convert it to root tree

== history ==
pioncher_simona
by Simona, build with geant4.9.4.p02, 9 MAPMT as a single detector area

pioncher_mehdi 
based on Simona's code, by Mehdi, build with geant4.9.5.p02 to include low energy EM data "G4EMLOW6.23"
16 MAPMT as 16 individual detector, can do background also